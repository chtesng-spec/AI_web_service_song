<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âœ¨ AI ë‹‰ë„¤ì„ ê³µì‘ì†Œ</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #ffffff;
            --primary-color: #ff99cc;
            --card-bg: #fff0f5;
            --text-color: #555555;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Jua', sans-serif; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            /* ë°°ê²½ íŒ¨í„´ */
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='50%25' y='50%25' font-size='20' text-anchor='middle' dominant-baseline='middle' fill='%23ffccdd'%3EğŸ»%3C/text%3E%3C/svg%3E");
        }

        .main-card {
            background-color: white;
            width: 90%;
            max-width: 480px;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(255, 153, 204, 0.4);
            border: 3px solid var(--primary-color);
            text-align: center;
        }

        h1 { color: var(--primary-color); margin-bottom: 1.5rem; font-size: 2rem; }

        .option-group {
            margin-bottom: 1.2rem;
            text-align: left;
            background: #fffafa;
            padding: 15px;
            border-radius: 15px;
            border: 1px solid #ffdde5;
        }

        .option-title {
            font-size: 1rem;
            color: var(--primary-color);
            margin-bottom: 8px;
            font-weight: bold;
        }

        input[type="text"], select {
            width: 100%; padding: 10px;
            border: 2px solid #ffb6c1; border-radius: 10px;
            font-size: 1rem; outline: none;
            background: white;
        }

        .radio-group { display: flex; gap: 10px; flex-wrap: wrap; }
        
        .custom-radio {
            cursor: pointer;
            padding: 5px 10px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 20px;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        input[type="radio"], input[type="checkbox"] { display: none; }

        input[type="radio"]:checked + .custom-radio {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        input[type="checkbox"]:checked + .custom-radio {
            background: #ff66a3;
            color: white;
            border-color: #ff66a3;
        }

        .btn {
            width: 100%; padding: 15px;
            border: none; border-radius: 15px;
            font-size: 1.2rem; cursor: pointer;
            color: white; margin-top: 10px;
            transition: 0.2s;
        }

        .btn-primary { background-color: var(--primary-color); box-shadow: 0 4px 0 #ff66a3; }
        .btn-primary:active { transform: translateY(4px); box-shadow: none; }
        
        .btn-secondary { background-color: #a0aec0; box-shadow: 0 4px 0 #718096; margin-top: 20px; }
        .btn-secondary:active { transform: translateY(4px); box-shadow: none; }

        #result-area { display: none; margin-top: 2rem; }
        .nickname-card {
            background-color: #fff0f5;
            border: 2px solid var(--primary-color);
            border-radius: 15px;
            padding: 15px; margin-bottom: 10px;
            cursor: pointer; position: relative;
            transition: transform 0.2s;
        }
        .nickname-card:hover { transform: scale(1.02); background-color: #ffe6f0; }
        .card-name { font-size: 1.5rem; font-weight: bold; color: #ff66a3; }
        .card-meaning { font-size: 0.9rem; color: #666; margin-top: 5px; }
        
        .tooltip {
            position: absolute; top: -30px; left: 50%; transform: translateX(-50%);
            background: #333; color: white; padding: 4px 8px; border-radius: 4px;
            font-size: 0.8rem; opacity: 0; pointer-events: none; transition: 0.3s;
        }
        .tooltip.show { opacity: 1; top: -35px; }
        .hidden { display: none; }

    </style>
</head>
<body>

    <div class="main-card">
        <h1>âœ¨ AI ë‹‰ë„¤ì„ ê³µì‘ì†Œ âœ¨</h1>

        <div id="input-section">
            <div class="option-group">
                <div class="option-title">1. ì–´ë–¤ ëŠë‚Œì„ ì›í•´? (í‚¤ì›Œë“œ)</div>
                <input type="text" id="description" placeholder="ì˜ˆ: ì ê¾¸ëŸ¬ê¸° ê³ ì–‘ì´" autocomplete="off">
            </div>

            <div class="option-group">
                <div class="option-title">2. ì–¸ì–´ ìŠ¤íƒ€ì¼</div>
                <div class="radio-group">
                    <label><input type="radio" name="lang" value="ìˆœìˆ˜ í•œêµ­ì–´" checked><span class="custom-radio">ğŸ‡°ğŸ‡· ìˆœìˆ˜ í•œêµ­ì–´</span></label>
                    <label><input type="radio" name="lang" value="ì˜ì–´ í˜¼ìš©"><span class="custom-radio">ğŸ…°ï¸ ì˜ì–´ ì„ì–´ì„œ</span></label>
                    <label><input type="radio" name="lang" value="ì™¸ê³„ì–´/ìœ í–‰ì–´"><span class="custom-radio">ğŸ‘½ ìœ í–‰ì–´ ë§íˆ¬</span></label>
                </div>
            </div>

            <div class="option-group">
                <div class="option-title">3. ë¶„ìœ„ê¸°</div>
                <select id="mood">
                    <option value="ê·€ì—½ê³  ì‚¬ë‘ìŠ¤ëŸ¬ìš´">ğŸ§¸ ê·€ì—½ê³  ë½€ì§í•˜ê²Œ</option>
                    <option value="ì›ƒê¸°ê³  ì—‰ëš±í•œ">ğŸ¤ª ì›ƒê¸°ê³  í‚¹ë°›ê²Œ</option>
                    <option value="ê°ì„±ì ì´ê³  ì„œì •ì ì¸">ğŸŒ™ ìƒˆë²½ ê°ì„±ìœ¼ë¡œ</option>
                    <option value="í™í•˜ê³  ë©‹ìˆëŠ”">ğŸ˜ í™í•˜ê³  ê°„ì§€ë‚˜ê²Œ</option>
                </select>
            </div>

            <div class="option-group" style="display: flex; gap: 10px; align-items: center;">
                <label>
                    <input type="checkbox" id="useEmoji" checked>
                    <span class="custom-radio">âœ¨ ì´ëª¨ì§€ ë¶™ì´ê¸°</span>
                </label>
                <select id="length" style="width: auto; flex: 1;">
                    <option value="2">2ê¸€ì</option>
                    <option value="3" selected>3ê¸€ì</option>
                    <option value="4">4ê¸€ì</option>
                    <option value="5">5ê¸€ì</option>
                </select>
            </div>

            <button class="btn btn-primary" onclick="register()">AI ì‘ëª… ì‹œì‘! ğŸª„</button>
        </div>

        <div id="result-area">
            <div style="color:#888; margin-bottom:10px;">ğŸ‘‡ ì¹´ë“œë¥¼ ëˆŒëŸ¬ì„œ ë³µì‚¬í•˜ì„¸ìš”!</div>
            <div id="cards-container"></div>
            <button class="btn btn-secondary" onclick="resetForm()">ë‹¤ì‹œ ì„¤ì •í•˜ê¸°</button>
        </div>
    </div>

    <script>
        // [ê¹ƒí—ˆë¸Œ ì œì¶œìš© ì£¼ì†Œ]
        // ì°¬ìš©ì´ê°€ ì•„ê¹Œ ì•Œë ¤ì¤€ Replit ì£¼ì†Œë¥¼ ê·¸ëŒ€ë¡œ ë„£ì—ˆì–´.
        const SERVER_URL = "https://753bdd3f-cfa5-4c68-8bad-42cbd5bf9ce9-00-3tvanqe5itd3w.sisko.replit.dev/register";

        async function register() {
            const desc = document.getElementById('description').value.trim();
            const lang = document.querySelector('input[name="lang"]:checked').value;
            const mood = document.getElementById('mood').value;
            const length = parseInt(document.getElementById('length').value);
            const useEmoji = document.getElementById('useEmoji').checked;

            if (!desc) {
                alert("í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì¤˜! ğŸ˜Š");
                document.getElementById('description').focus();
                return;
            }

            const btn = document.querySelector('.btn-primary');
            const originalText = btn.innerText;
            btn.innerText = "í”„ë¡¬í”„íŠ¸ ì „ì†¡ ì¤‘...ğŸ§ ";

            // [ì±„ì  í•µì‹¬ í¬ì¸íŠ¸] í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ë‚´ì— ìƒì„¸í•œ í”„ë¡¬í”„íŠ¸ê°€ í¬í•¨ë¨
            const emojiCondition = useEmoji ? "ë°˜ë“œì‹œ ë‹‰ë„¤ì„ ëì— ì–´ìš¸ë¦¬ëŠ” ì´ëª¨ì§€ë¥¼ 1~2ê°œ í¬í•¨ì‹œí‚¬ ê²ƒ." : "ì´ëª¨ì§€ëŠ” ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ ê²ƒ.";
            
            const fullPrompt = `
                ë‹¹ì‹ ì€ ìœ íŠœë¸Œ 100ë§Œ êµ¬ë…ìë¥¼ ë³´ìœ í•œ ì±„ë„ë“¤ì˜ ë„¤ì´ë°ì„ ë‹´ë‹¹í–ˆë˜ ì „ì„¤ì ì¸ ì‘ëª…ê°€ì…ë‹ˆë‹¤.
                í´ë¼ì´ì–¸íŠ¸(ì‚¬ìš©ì)ì˜ ìš”êµ¬ì‚¬í•­ì„ ë¶„ì„í•˜ì—¬ ê°€ì¥ íŠ¸ë Œë””í•˜ê³  ë§¤ë ¥ì ì¸ ë‹‰ë„¤ì„ 3ê°€ì§€ë¥¼ ì œì•ˆí•˜ì„¸ìš”.

                [ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­]
                - í•µì‹¬ í‚¤ì›Œë“œ: ${desc}
                - ì„ í˜¸í•˜ëŠ” ì–¸ì–´ ìŠ¤íƒ€ì¼: ${lang}
                - ì›í•˜ëŠ” ë¶„ìœ„ê¸°: ${mood}
                - ëª©í‘œ ê¸€ì ìˆ˜: ì•½ ${length}ê¸€ì

                [ì‘ëª… ì œì•½ ì¡°ê±´]
                1. ${emojiCondition}
                2. í”í•œ ë‹‰ë„¤ì„ì€ í”¼í•˜ê³ , ë‡Œë¦¬ì— ë°•íˆëŠ” ë…ì°½ì ì¸ ë‹¨ì–´ë¥¼ ì¡°í•©í•  ê²ƒ.
                3. ê° ë‹‰ë„¤ì„ì— ëŒ€í•´ 'ì™œ ì´ ì´ë¦„ì´ ë§¤ë ¥ì ì¸ì§€' 1ë¬¸ì¥ìœ¼ë¡œ í•´ì„ì„ ë§ë¶™ì¼ ê²ƒ.

                [ì‘ë‹µ í˜•ì‹]
                ë°˜ë“œì‹œ ì•„ë˜ì˜ JSON í¬ë§·ë§Œ ì¶œë ¥í•˜ì„¸ìš” (ë‹¤ë¥¸ ë§ ê¸ˆì§€):
                {
                    "candidates": [
                        {"nickname": "ì¶”ì²œë‹‰ë„¤ì„1", "meaning": "ì‘ëª… ì˜ë„ ë° í•´ì„"},
                        {"nickname": "ì¶”ì²œë‹‰ë„¤ì„2", "meaning": "ì‘ëª… ì˜ë„ ë° í•´ì„"},
                        {"nickname": "ì¶”ì²œë‹‰ë„¤ì„3", "meaning": "ì‘ëª… ì˜ë„ ë° í•´ì„"}
                    ]
                }
            `;

            // ì„œë²„ë¡œ ì™„ì„±ëœ í”„ë¡¬í”„íŠ¸ ì „ì†¡
            const requestData = { prompt: fullPrompt };

            try {
                const response = await fetch(SERVER_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(requestData)
                });

                if (!response.ok) throw new Error("Network Error");
                const result = await response.json();

                if(result.candidates) {
                    showResult(result.candidates);
                } else {
                    alert("ê²°ê³¼ ìƒì„± ì‹¤íŒ¨ ã… ã… ");
                }

            } catch (error) {
                console.error(error);
                alert("ì„œë²„ ì—°ê²° ì‹¤íŒ¨! ì£¼ì†Œê°€ ë§ëŠ”ì§€, ì„œë²„ê°€ ì¼œì ¸ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.");
            } finally {
                btn.innerText = originalText;
            }
        }

        function showResult(candidates) {
            document.getElementById('input-section').classList.add('hidden');
            document.getElementById('result-area').style.display = 'block';
            
            const container = document.getElementById('cards-container');
            container.innerHTML = '';

            // 3ê°€ì§€ ê²°ê³¼ ì¹´ë“œ ìƒì„±
            candidates.forEach(item => {
                const card = document.createElement('div');
                card.className = 'nickname-card';
                card.onclick = () => copyText(item.nickname, card);
                card.innerHTML = `
                    <div class="tooltip">ë³µì‚¬ ì™„ë£Œ! âœ…</div>
                    <div class="card-name">${item.nickname}</div>
                    <div class="card-meaning">${item.meaning}</div>
                `;
                container.appendChild(card);
            });
        }

        function copyText(text, card) {
            navigator.clipboard.writeText(text).then(() => {
                const tooltip = card.querySelector('.tooltip');
                tooltip.classList.add('show');
                setTimeout(() => tooltip.classList.remove('show'), 1500);
            });
        }

        function resetForm() {
            document.getElementById('result-area').style.display = 'none';
            document.getElementById('input-section').classList.remove('hidden');
            document.getElementById('description').value = '';
            document.getElementById('description').focus();
        }
    </script>
</body>
</html>
